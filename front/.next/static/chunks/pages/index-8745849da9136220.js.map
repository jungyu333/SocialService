{"version":3,"file":"static/chunks/pages/index-8745849da9136220.js","mappings":"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","sources":["webpack://_N_E/","webpack://_N_E/./components/MyProfile.tsx","webpack://_N_E/./node_modules/@ant-design/icons-svg/es/asn/PlusSquareOutlined.js","webpack://_N_E/./node_modules/@ant-design/icons/es/icons/PlusSquareOutlined.js","webpack://_N_E/./components/PostForm.tsx","webpack://_N_E/./pages/index.tsx","webpack://_N_E/./node_modules/next/head.js"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/\",\n      function () {\n        return require(\"private-next-pages/index.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/\"])\n      });\n    }\n  ","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport tw from \"tailwind-styled-components\";\r\nimport { RootState } from \"../reducers\";\r\n\r\nconst Wrapper = tw.div`\r\n  hidden\r\n  absolute\r\n  xl:flex \r\n  top-10\r\n  left-10\r\n`;\r\n\r\nconst ProfileWrapper = tw.div`\r\n  w-96\r\n  bg-gray-100\r\n  h-48\r\n  shadow-md\r\n  flex-col\r\n  items-center\r\n  space-y-5\r\n`;\r\n\r\nconst ProfileContainer = tw.div`\r\n  flex\r\n  space-x-5\r\n  items-center\r\n  justify-start\r\n  px-4\r\n  mt-8\r\n`;\r\n\r\nconst Avatar = tw.img`\r\n  w-20\r\n  h-20\r\n  rounded-full\r\n  shadow-sm\r\n`;\r\n\r\nconst Image = tw.div`\r\n  bg-slate-700\r\n  rounded-full\r\n  w-20\r\n  h-20\r\n  shadow-sm\r\n`;\r\n\r\nconst UserInfo = tw.div`\r\n  space-y-2\r\n`;\r\n\r\nconst UserName = tw.div`\r\n  text-2xl\r\n  font-bold\r\n`;\r\n\r\nconst InfoContainer = tw.div`\r\n  flex\r\n  justify-center\r\n`;\r\n\r\nconst InfoBox = tw.div`\r\n  w-full\r\n  flex-col\r\n  justify-between\r\n  items-center\r\n  text-center\r\n`;\r\n\r\nfunction MyProfile() {\r\n  const { me } = useSelector((state: RootState) => state.userReducer);\r\n  return (\r\n    <>\r\n      <Wrapper>\r\n        {me ? (\r\n          <>\r\n            <ProfileWrapper>\r\n              <ProfileContainer>\r\n                {me?.avatar === \"null\" ? (\r\n                  <Image />\r\n                ) : (\r\n                  <Avatar src={`http://localhost:4000/${me?.avatar}`} />\r\n                )}\r\n                <UserInfo>\r\n                  <UserName>{me?.nickname}</UserName>\r\n                </UserInfo>\r\n              </ProfileContainer>\r\n              <InfoContainer>\r\n                <InfoBox>\r\n                  <div>게시물</div>\r\n                  {me?.Posts?.length}\r\n                </InfoBox>\r\n                <InfoBox>\r\n                  <div>팔로잉</div>\r\n                  {me?.Followings?.length}\r\n                </InfoBox>\r\n                <InfoBox>\r\n                  <div>팔로워</div>\r\n                  {me?.Followers?.length}\r\n                </InfoBox>\r\n              </InfoContainer>\r\n            </ProfileWrapper>\r\n          </>\r\n        ) : null}\r\n      </Wrapper>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default MyProfile;\r\n","// This icon file is generated automatically.\nvar PlusSquareOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"64 64 896 896\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M328 544h152v152c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V544h152c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V328c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v152H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8z\" } }, { \"tag\": \"path\", \"attrs\": { \"d\": \"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z\" } }] }, \"name\": \"plus-square\", \"theme\": \"outlined\" };\nexport default PlusSquareOutlined;\n","import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\n// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport PlusSquareOutlinedSvg from \"@ant-design/icons-svg/es/asn/PlusSquareOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar PlusSquareOutlined = function PlusSquareOutlined(props, ref) {\n  return /*#__PURE__*/React.createElement(AntdIcon, _objectSpread(_objectSpread({}, props), {}, {\n    ref: ref,\n    icon: PlusSquareOutlinedSvg\n  }));\n};\n\nPlusSquareOutlined.displayName = 'PlusSquareOutlined';\nexport default /*#__PURE__*/React.forwardRef(PlusSquareOutlined);","import { DeleteOutlined, PlusSquareOutlined } from \"@ant-design/icons\";\r\nimport React, { useCallback, useRef } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport tw from \"tailwind-styled-components\";\r\nimport {\r\n  addPostRequestAction,\r\n  postImageDeleteAction,\r\n  postImageUploadRequestAction,\r\n} from \"../action/postActions\";\r\nimport { myInfoLoadRequestAction } from \"../action/userAction\";\r\nimport { RootState } from \"../reducers\";\r\n\r\nconst Wrapper = tw.div`\r\n  max-w-sm\r\n  mx-auto\r\n  sm:max-w-md\r\n  mt-10\r\n`;\r\n\r\nconst FormContainer = tw.form`\r\n  space-y-1\r\n`;\r\n\r\nconst TextArea = tw.textarea`\r\n  w-full\r\n  p-2\r\n  focus:outline-none\r\n  focus:ring-2\r\n  focus:ring-indigo-500\r\n  rounded-md\r\n  border-[1px]\r\n  border-gray-400\r\n  \r\n`;\r\n\r\nconst SubmitButtonContainer = tw.div`\r\n  flex\r\n  items-center\r\n  justify-between\r\n`;\r\n\r\nconst SubmitButton = tw.button`\r\n  bg-indigo-400\r\n  hover:bg-indigo-600\r\n  text-white\r\n  p-2\r\n  px-4\r\n  rounded-md\r\n`;\r\n\r\nconst PlusPhoto = tw(PlusSquareOutlined)`\r\n  text-indigo-400\r\n  hover:text-indigo-700\r\n  text-3xl\r\n  cursor-pointer\r\n`;\r\n\r\nconst ImageInput = tw.input`\r\n  hidden\r\n`;\r\n\r\nconst PreImage = tw.img`\r\n  w-28\r\n  h-28\r\n  bg-cover\r\n`;\r\n\r\ninterface ValidForm {\r\n  content: string;\r\n}\r\n\r\nfunction PostForm() {\r\n  const { imagePaths } = useSelector((state: RootState) => state.postReducer);\r\n  const dispatch = useDispatch();\r\n  const photoInput = useRef<HTMLInputElement>();\r\n  const { register, handleSubmit, reset } = useForm<ValidForm>();\r\n  const onClickPhoto = useCallback(() => {\r\n    photoInput.current.click();\r\n  }, [photoInput.current]);\r\n  const onValid = ({ content }: ValidForm) => {\r\n    if (!imagePaths) {\r\n      dispatch(addPostRequestAction({ content }));\r\n    } else {\r\n      const formData = new FormData();\r\n      imagePaths.forEach((image) => {\r\n        formData.append(\"image\", image);\r\n      });\r\n      formData.append(\"content\", content);\r\n      dispatch(addPostRequestAction(formData));\r\n    }\r\n    reset();\r\n  };\r\n  const onChangePhoto = (e) => {\r\n    const formData = new FormData();\r\n    [].forEach.call(e.target.files, (file) => {\r\n      formData.append(\"postimg\", file);\r\n    });\r\n    dispatch(postImageUploadRequestAction(formData));\r\n    e.target.value = \"\";\r\n  };\r\n  const onClickPostImgDelete = (index) => {\r\n    dispatch(postImageDeleteAction(index));\r\n  };\r\n\r\n  return (\r\n    <Wrapper>\r\n      <FormContainer\r\n        onSubmit={handleSubmit(onValid)}\r\n        encType=\"multipart/form-data\"\r\n      >\r\n        <TextArea {...register(\"content\")} rows={4} />\r\n        <SubmitButtonContainer>\r\n          <PlusPhoto onClick={onClickPhoto} />\r\n          <ImageInput\r\n            multiple\r\n            type=\"file\"\r\n            ref={photoInput}\r\n            name=\"postimg\"\r\n            accept=\"image/*\"\r\n            onChange={onChangePhoto}\r\n          />\r\n          <SubmitButton>짹짹</SubmitButton>\r\n        </SubmitButtonContainer>\r\n      </FormContainer>\r\n      <div>\r\n        {imagePaths.length !== 0 ? (\r\n          <div className=\"flex px-2 items-center space-x-2 mt-2 overflow-auto scrollbar-thin  scrollbar-thumb-gray-400 scrollbar-track-gray-100\">\r\n            {imagePaths.map((image) => (\r\n              <div key={image} className=\"h-36 w-28 min-w-max mb-2\">\r\n                <PreImage src={`http://localhost:4000/${image}`} />\r\n                <button\r\n                  onClick={() => onClickPostImgDelete(image)}\r\n                  className=\"text-lg text-gray-400 hover:text-red-500\"\r\n                >\r\n                  <DeleteOutlined />\r\n                </button>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    </Wrapper>\r\n  );\r\n}\r\n\r\nexport default PostForm;\r\n","import Head from \"next/head\";\r\nimport React, { useEffect } from \"react\";\r\nimport Layout from \"../components/Layout\";\r\nimport PostCard from \"../components/PostCard\";\r\nimport MyProfile from \"../components/MyProfile\";\r\nimport tw from \"tailwind-styled-components\";\r\nimport PostForm from \"../components/PostForm\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootState } from \"../reducers\";\r\nimport { END } from \"redux-saga\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { myInfoLoadRequestAction } from \"../action/userAction\";\r\nimport { useInView } from \"react-intersection-observer\";\r\nimport { postLoadRequestAction } from \"../action/postActions\";\r\nimport wrapper from \"../store/configureStore\";\r\nimport axios from \"axios\";\r\nimport { GetServerSideProps } from \"next\";\r\n\r\nconst Wrapper = tw.div`\r\n  flex-col\r\n  relative\r\n`;\r\n\r\nconst Home = () => {\r\n  const [ref, inView] = useInView();\r\n\r\n  const dispatch = useDispatch();\r\n  const { me } = useSelector((state: RootState) => state.userReducer);\r\n  const {\r\n    postDeleteDone,\r\n    addPostDone,\r\n    mainPosts,\r\n    postLoadLoading,\r\n    hasMorePosts,\r\n  } = useSelector((state: RootState) => state.postReducer);\r\n\r\n  useEffect(() => {\r\n    if (inView && hasMorePosts && !postLoadLoading) {\r\n      const lastId = mainPosts[mainPosts.length - 1]?.id;\r\n\r\n      dispatch(postLoadRequestAction(lastId));\r\n    }\r\n  }, [inView, mainPosts, hasMorePosts, postLoadLoading]);\r\n\r\n  useEffect(() => {\r\n    if (addPostDone) {\r\n      dispatch(myInfoLoadRequestAction());\r\n    }\r\n    if (postDeleteDone) {\r\n      dispatch(myInfoLoadRequestAction());\r\n    }\r\n  }, [addPostDone, postDeleteDone]);\r\n\r\n  return (\r\n    <>\r\n      <Head>\r\n        <meta charSet=\"UTF-8\" />\r\n        <title>Social Service</title>\r\n      </Head>\r\n      <Layout>\r\n        <Wrapper>\r\n          {me ? <MyProfile /> : null}\r\n          {me && <PostForm />}\r\n          {mainPosts?.map((post) => (\r\n            <PostCard key={post?.id} {...post} />\r\n          ))}\r\n          <div\r\n            className=\"h-3\"\r\n            ref={hasMorePosts && !postLoadLoading ? ref : undefined}\r\n          />\r\n        </Wrapper>\r\n      </Layout>\r\n    </>\r\n  );\r\n};\r\n\r\nexport const getServerSideProps: GetServerSideProps =\r\n  wrapper.getServerSideProps((store) => async (context) => {\r\n    const cookie = context.req ? context.req.headers.cookie : \"\";\r\n    axios.defaults.headers.common.Cookie = \"\";\r\n    if (context.req && cookie) {\r\n      axios.defaults.headers.common.Cookie = cookie;\r\n    }\r\n\r\n    store.dispatch(myInfoLoadRequestAction());\r\n    store.dispatch(postLoadRequestAction(0));\r\n\r\n    store.dispatch(END);\r\n    await store.sagaTask.toPromise();\r\n    return {\r\n      props: {},\r\n    };\r\n  });\r\n\r\nexport default Home;\r\n","module.exports = require('./dist/shared/lib/head')\n"],"names":["window","__NEXT_P","push","Wrapper","tw","ProfileWrapper","ProfileContainer","Avatar","Image","UserInfo","UserName","InfoContainer","InfoBox","me","useSelector","state","userReducer","avatar","src","nickname","div","Posts","length","Followings","Followers","props","ref","AntdIcon","icon","displayName","FormContainer","TextArea","SubmitButtonContainer","SubmitButton","PlusPhoto","PlusSquareOutlined","ImageInput","PreImage","postReducer","imagePaths","dispatch","useDispatch","photoInput","useRef","useForm","register","handleSubmit","reset","onClickPhoto","useCallback","current","click","onSubmit","content","formData","FormData","forEach","image","append","addPostRequestAction","encType","rows","onClick","multiple","type","name","accept","onChange","e","call","target","files","file","postImageUploadRequestAction","value","className","map","button","index","postImageDeleteAction","DeleteOutlined","useInView","inView","postDeleteDone","addPostDone","mainPosts","postLoadLoading","hasMorePosts","useEffect","lastId","id","postLoadRequestAction","myInfoLoadRequestAction","Head","meta","charSet","title","Layout","MyProfile","PostForm","post","PostCard","undefined","module","exports"],"sourceRoot":""}