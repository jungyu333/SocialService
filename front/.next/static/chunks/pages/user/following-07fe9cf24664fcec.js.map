{"version":3,"file":"static/chunks/pages/user/following-07fe9cf24664fcec.js","mappings":"oFACKA,OAAOC,SAAWD,OAAOC,UAAY,IAAIC,KAAK,CAC7C,kBACA,WACE,OAAO,EAAQ,U,0NCJvB,I,GAAA,E,uNAmBA,IAAMC,EAAUC,IAAAA,IAAM,K,SA0EtB,UAhEA,WACE,IAAMC,GAAWC,EAAAA,EAAAA,MACXC,GAASC,EAAAA,EAAAA,aAEbC,GAAAA,EAAAA,EAAAA,KAAY,SAACC,G,OAAqBA,EAAMC,eADlCC,EACNH,EADMG,cAAeC,EACrBJ,EADqBI,GAAIC,EACzBL,EADyBK,cAAeC,EACxCN,EADwCM,qBAElBC,GAAAA,EAAAA,EAAAA,MAAhBC,EAAgBD,EAAhBC,IAAKC,EAAWF,EAAXE,OAcb,OAZAC,EAAAA,EAAAA,YAAU,WACHN,GACHN,EAAOa,QAAQ,OAEhB,KAEHD,EAAAA,EAAAA,YAAU,WACR,GAAID,GAAUJ,IAAkBC,EAAsB,C,IACrCH,EAATS,EAAgD,QAAvCT,EAAAA,EAAcA,EAAcU,OAAS,UAAE,IAAvCV,OAAAA,EAAAA,EAAyCW,GACxDlB,GAASmB,EAAAA,EAAAA,GAA0BH,OAEpC,CAACH,EAAQJ,EAAeC,EAAsBH,KAE/C,sB,WACE,UAACa,IAAI,C,WACH,SAACC,OAAI,CAACC,QAAQ,WACd,SAACC,QAAK,C,SAAC,4CAET,SAACC,EAAAA,EAAM,C,UACL,UAAC1B,EAAO,C,UACLS,EAAckB,KAAI,SAACC,G,OAClB,SAACC,EAAAA,EAAU,CAETT,GAAIQ,EAAUR,GACdU,SAAUF,EAAUE,SACpBC,OAAQH,EAAUG,OAClBC,aAAa,GAJRJ,EAAUR,QAOnB,SAACa,MAAG,CACFC,UAAU,OACVpB,IAAKH,IAAkBC,EAAuBE,OAAMqB,e","sources":["webpack://_N_E/?42fa","webpack://_N_E/./pages/user/following.tsx"],"sourcesContent":["\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/user/following\",\n      function () {\n        return require(\"private-next-pages/user/following.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/user/following\"])\n      });\n    }\n  ","import axios from \"axios\";\r\nimport { GetServerSideProps } from \"next\";\r\nimport { useRouter } from \"next/router\";\r\nimport React, { useEffect } from \"react\";\r\nimport { END } from \"redux-saga\";\r\nimport {\r\n  followingLoadRequestAcion,\r\n  myInfoLoadRequestAction,\r\n} from \"../../action/userAction\";\r\nimport Layout from \"../../components/Layout\";\r\nimport wrapper from \"../../store/configureStore\";\r\nimport tw from \"tailwind-styled-components\";\r\nimport FollowCard from \"../../components/FollowCard\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport Head from \"next/head\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { RootState } from \"../../reducers\";\r\nimport { useInView } from \"react-intersection-observer\";\r\n\r\nconst Wrapper = tw.div`\r\n  max-w-sm\r\n  mx-auto\r\n  sm:max-w-md\r\n  flex-col\r\n  justify-center\r\n  mt-4\r\n  mb-2\r\n`;\r\n\r\nfunction following() {\r\n  const dispatch = useDispatch();\r\n  const router = useRouter();\r\n  const { FollowersList, me, hasMoreFollow, followingLoadLoading } =\r\n    useSelector((state: RootState) => state.userReducer);\r\n  const { ref, inView } = useInView();\r\n\r\n  useEffect(() => {\r\n    if (!me) {\r\n      router.replace(\"/\");\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (inView && hasMoreFollow && !followingLoadLoading) {\r\n      const lastId = FollowersList[FollowersList.length - 1]?.id;\r\n      dispatch(followingLoadRequestAcion(lastId));\r\n    }\r\n  }, [inView, hasMoreFollow, followingLoadLoading, FollowersList]);\r\n  return (\r\n    <>\r\n      <Head>\r\n        <meta charSet=\"UTF-8\" />\r\n        <title>팔로잉 | Social Service</title>\r\n      </Head>\r\n      <Layout>\r\n        <Wrapper>\r\n          {FollowersList.map((following) => (\r\n            <FollowCard\r\n              key={following.id}\r\n              id={following.id}\r\n              nickname={following.nickname}\r\n              avatar={following.avatar}\r\n              isFollowing={true}\r\n            />\r\n          ))}\r\n          <div\r\n            className=\"h-10\"\r\n            ref={hasMoreFollow && !followingLoadLoading ? ref : undefined}\r\n          />\r\n        </Wrapper>\r\n      </Layout>\r\n    </>\r\n  );\r\n}\r\n\r\nexport const getServerSideProps: GetServerSideProps =\r\n  wrapper.getServerSideProps((store) => async (context) => {\r\n    const cookie = context.req ? context.req.headers.cookie : \"\";\r\n    axios.defaults.headers.common.Cookie = \"\";\r\n    if (context.req && cookie) {\r\n      axios.defaults.headers.common.Cookie = cookie;\r\n    }\r\n\r\n    store.dispatch(myInfoLoadRequestAction());\r\n    store.dispatch(followingLoadRequestAcion(0));\r\n    store.dispatch(END);\r\n    await store.sagaTask.toPromise();\r\n\r\n    return {\r\n      props: {},\r\n    };\r\n  });\r\n\r\nexport default following;\r\n"],"names":["window","__NEXT_P","push","Wrapper","tw","dispatch","useDispatch","router","useRouter","useSelector","state","userReducer","FollowersList","me","hasMoreFollow","followingLoadLoading","useInView","ref","inView","useEffect","replace","lastId","length","id","followingLoadRequestAcion","Head","meta","charSet","title","Layout","map","following","FollowCard","nickname","avatar","isFollowing","div","className","undefined"],"sourceRoot":""}