{"version":3,"file":"../pages/user/[id].js","mappings":"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","sources":["webpack://react-social-app/./components/UserProfile.tsx","webpack://react-social-app/./pages/user/[id].tsx","webpack://react-social-app/external commonjs \"@ant-design/icons\"","webpack://react-social-app/external commonjs \"axios\"","webpack://react-social-app/external commonjs \"next-redux-wrapper\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/head-manager-context.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/i18n/normalize-locale-path.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/is-plain-object.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/mitt.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/page-path/denormalize-page-path.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/router-context.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/router/utils/format-url.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/router/utils/get-asset-path-from-route.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/router/utils/get-middleware-regex.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/router/utils/is-dynamic.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/router/utils/parse-relative-url.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/router/utils/querystring.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/router/utils/resolve-rewrites.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/router/utils/route-matcher.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/router/utils/route-regex.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/utils.js\"","webpack://react-social-app/external commonjs \"next/head\"","webpack://react-social-app/external commonjs \"next/router\"","webpack://react-social-app/external commonjs \"react\"","webpack://react-social-app/external commonjs \"react-redux\"","webpack://react-social-app/external commonjs \"react-slick\"","webpack://react-social-app/external commonjs \"react/jsx-runtime\"","webpack://react-social-app/external commonjs \"redux\"","webpack://react-social-app/external commonjs \"redux-devtools-extension\"","webpack://react-social-app/external commonjs \"redux-saga\"","webpack://react-social-app/external commonjs \"redux-saga/effects\"","webpack://react-social-app/external commonjs \"tailwind-styled-components\"","webpack://react-social-app/external module \"immer\"","webpack://react-social-app/external module \"react-hook-form\"","webpack://react-social-app/external module \"react-intersection-observer\""],"sourcesContent":["import { UserAddOutlined } from \"@ant-design/icons\";\r\nimport React from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useSelector } from \"react-redux\";\r\nimport tw from \"tailwind-styled-components\";\r\nimport {\r\n  userFollowRequestAction,\r\n  userUnFollowRequestAction,\r\n} from \"../action/userAction\";\r\nimport { RootState } from \"../reducers\";\r\n\r\nconst Wrapper = tw.div`\r\n  hidden\r\n  absolute\r\n  xl:flex \r\n  top-10\r\n  left-10\r\n  \r\n`;\r\n\r\nconst ProfileWrapper = tw.div`\r\n  w-96\r\n  bg-gray-100\r\n  h-48\r\n  shadow-md\r\n  flex-col\r\n  items-center\r\n  space-y-5\r\n`;\r\n\r\nconst ProfileContainer = tw.div`\r\n  flex\r\n  space-x-5\r\n  items-center\r\n  justify-start\r\n  px-4\r\n  mt-8\r\n`;\r\n\r\nconst Avatar = tw.img`\r\n  w-20\r\n  h-20\r\n  rounded-full\r\n  shadow-sm\r\n`;\r\n\r\nconst Image = tw.div`\r\n  bg-slate-700\r\n  rounded-full\r\n  w-20\r\n  h-20\r\n  shadow-sm\r\n`;\r\n\r\nconst UserInfo = tw.div`\r\n  flex\r\n  items-center\r\n  w-64\r\n  justify-between\r\n`;\r\n\r\nconst Follow = tw.button`\r\n  text-sm\r\n  text-gray-500\r\n  hover:text-indigo-700\r\n  flex \r\n  justify-end\r\n  items-center\r\n  w-2/4\r\n  \r\n`;\r\n\r\nconst UserName = tw.div`\r\n  text-2xl\r\n  font-bold\r\n`;\r\n\r\nconst InfoContainer = tw.div`\r\n  flex\r\n  justify-center\r\n`;\r\n\r\nconst InfoBox = tw.div`\r\n  w-full\r\n  flex-col\r\n  justify-between\r\n  items-center\r\n  text-center\r\n`;\r\n\r\nfunction UserProfile() {\r\n  const { userInfo, me } = useSelector((state: RootState) => state.userReducer);\r\n  const dispatch = useDispatch();\r\n  const isFollowed = me?.Followings.find((user) => user?.id === userInfo?.id);\r\n  const onClickFollow = () => {\r\n    dispatch(userFollowRequestAction(userInfo.id));\r\n  };\r\n\r\n  const onClickUnFollow = () => {\r\n    dispatch(userUnFollowRequestAction(userInfo.id));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Wrapper>\r\n        {userInfo ? (\r\n          <>\r\n            <ProfileWrapper>\r\n              <ProfileContainer>\r\n                {userInfo?.avatar === \"null\" ? (\r\n                  <Image />\r\n                ) : (\r\n                  <Avatar src={`http://localhost:4000/${userInfo?.avatar}`} />\r\n                )}\r\n                <UserInfo>\r\n                  <UserName>{userInfo?.nickname}</UserName>\r\n                  {me ? (\r\n                    <>\r\n                      {!isFollowed ? (\r\n                        <>\r\n                          <Follow onClick={onClickFollow}>\r\n                            <UserAddOutlined />\r\n                            Follow\r\n                          </Follow>\r\n                        </>\r\n                      ) : (\r\n                        <Follow onClick={onClickUnFollow}>\r\n                          <UserAddOutlined />\r\n                          UnFollow\r\n                        </Follow>\r\n                      )}\r\n                    </>\r\n                  ) : null}\r\n                </UserInfo>\r\n              </ProfileContainer>\r\n              <InfoContainer>\r\n                <InfoBox>\r\n                  <div>게시물</div>\r\n                  {userInfo?.Posts?.length}\r\n                </InfoBox>\r\n                <InfoBox>\r\n                  <div>팔로잉</div>\r\n                  {userInfo?.Followings?.length}\r\n                </InfoBox>\r\n                <InfoBox>\r\n                  <div>팔로워</div>\r\n                  {userInfo?.Followers?.length}\r\n                </InfoBox>\r\n              </InfoContainer>\r\n            </ProfileWrapper>\r\n          </>\r\n        ) : null}\r\n      </Wrapper>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default UserProfile;\r\n","import axios from \"axios\";\r\nimport { GetServerSideProps } from \"next\";\r\nimport Head from \"next/head\";\r\nimport { useRouter } from \"next/router\";\r\nimport React, { useEffect } from \"react\";\r\nimport { useInView } from \"react-intersection-observer\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { END } from \"redux-saga\";\r\n\r\nimport { userPostLoadRequestAcion } from \"../../action/postActions\";\r\nimport {\r\n  myInfoLoadRequestAction,\r\n  userLoadRequestAction,\r\n} from \"../../action/userAction\";\r\nimport Layout from \"../../components/Layout\";\r\nimport MyProfile from \"../../components/MyProfile\";\r\nimport PostCard from \"../../components/PostCard\";\r\nimport UserProfile from \"../../components/UserProfile\";\r\nimport { RootState } from \"../../reducers\";\r\nimport wrapper from \"../../store/configureStore\";\r\n\r\nfunction User() {\r\n  const [ref, inView] = useInView();\r\n  const { me, userInfo } = useSelector((state: RootState) => state.userReducer);\r\n  const { mainPosts, hasMorePosts, postLoadLoading } = useSelector(\r\n    (state: RootState) => state.postReducer\r\n  );\r\n  const router = useRouter();\r\n  const { id } = router.query;\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (inView && hasMorePosts && !postLoadLoading) {\r\n      const lastId = mainPosts[mainPosts.length - 1]?.id;\r\n      dispatch(userPostLoadRequestAcion({ lastId: lastId, userId: id }));\r\n    }\r\n  }, [inView, mainPosts, hasMorePosts, postLoadLoading, id]);\r\n\r\n  return (\r\n    <>\r\n      <Head>\r\n        <meta charSet=\"UTF-8\" />\r\n        <title>피드 | Social Service</title>\r\n      </Head>\r\n      <Layout>\r\n        <div className=\"relative mt-10\">\r\n          {userInfo && userInfo.id !== me?.id ? <UserProfile /> : <MyProfile />}\r\n          {mainPosts?.map((post) => (\r\n            <PostCard key={post?.id} {...post} />\r\n          ))}\r\n          <div\r\n            className=\"h-3\"\r\n            ref={hasMorePosts && !postLoadLoading ? ref : undefined}\r\n          />\r\n        </div>\r\n      </Layout>\r\n    </>\r\n  );\r\n}\r\n\r\nexport const getServerSideProps: GetServerSideProps =\r\n  wrapper.getServerSideProps((store) => async (context) => {\r\n    const cookie = context.req ? context.req.headers.cookie : \"\";\r\n    axios.defaults.headers.common.Cookie = \"\";\r\n    if (context.req && cookie) {\r\n      axios.defaults.headers.common.Cookie = cookie;\r\n    }\r\n    store.dispatch(userLoadRequestAction(context.params.id));\r\n    store.dispatch(\r\n      userPostLoadRequestAcion({ lastId: 0, userId: context.params.id })\r\n    );\r\n    store.dispatch(myInfoLoadRequestAction());\r\n\r\n    store.dispatch(END);\r\n    await store.sagaTask.toPromise();\r\n    return {\r\n      props: {},\r\n    };\r\n  });\r\n\r\nexport default User;\r\n","module.exports = require(\"@ant-design/icons\");","module.exports = require(\"axios\");","module.exports = require(\"next-redux-wrapper\");","module.exports = require(\"next/dist/shared/lib/head-manager-context.js\");","module.exports = require(\"next/dist/shared/lib/i18n/normalize-locale-path.js\");","module.exports = require(\"next/dist/shared/lib/is-plain-object.js\");","module.exports = require(\"next/dist/shared/lib/mitt.js\");","module.exports = require(\"next/dist/shared/lib/page-path/denormalize-page-path.js\");","module.exports = require(\"next/dist/shared/lib/router-context.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/format-url.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/get-asset-path-from-route.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/get-middleware-regex.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/is-dynamic.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/parse-relative-url.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/querystring.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/resolve-rewrites.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/route-matcher.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/route-regex.js\");","module.exports = require(\"next/dist/shared/lib/utils.js\");","module.exports = require(\"next/head\");","module.exports = require(\"next/router\");","module.exports = require(\"react\");","module.exports = require(\"react-redux\");","module.exports = require(\"react-slick\");","module.exports = require(\"react/jsx-runtime\");","module.exports = require(\"redux\");","module.exports = require(\"redux-devtools-extension\");","module.exports = require(\"redux-saga\");","module.exports = require(\"redux-saga/effects\");","module.exports = require(\"tailwind-styled-components\");","module.exports = import(\"immer\");;","module.exports = import(\"react-hook-form\");;","module.exports = import(\"react-intersection-observer\");;"],"names":["UserAddOutlined","React","useDispatch","useSelector","tw","userFollowRequestAction","userUnFollowRequestAction","Wrapper","div","ProfileWrapper","ProfileContainer","Avatar","img","Image","UserInfo","Follow","button","UserName","InfoContainer","InfoBox","UserProfile","userInfo","me","state","userReducer","dispatch","isFollowed","Followings","find","user","id","onClickFollow","onClickUnFollow","avatar","src","nickname","onClick","Posts","length","Followers","axios","Head","useRouter","useEffect","useInView","END","userPostLoadRequestAcion","myInfoLoadRequestAction","userLoadRequestAction","Layout","MyProfile","PostCard","wrapper","User","ref","inView","mainPosts","hasMorePosts","postLoadLoading","postReducer","router","query","lastId","userId","meta","charSet","title","className","map","post","undefined","getServerSideProps","store","context","cookie","req","headers","defaults","common","Cookie","params","sagaTask","toPromise","props"],"sourceRoot":""}