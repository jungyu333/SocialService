{"version":3,"file":"../pages/search/[keyword].js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAA0B;AAEc;AACC;AACe;AACd;AACA;AACT;AACkC;AACD;AACrB;AACI;AAEA;AACH;AAE9C,SAASc,MAAM,GAAG;IAChB,MAAMC,QAAQ,GAAGT,wDAAW,EAAE;IAC9B,MAAMU,MAAM,GAAGf,sDAAS,EAAE;IAC1B,MAAM,EAAEgB,SAAS,GAAEC,eAAe,GAAEC,YAAY,GAAE,GAAGd,wDAAW,CAC9D,CAACe,KAAgB,GAAKA,KAAK,CAACC,WAAW;IAAA,CACxC;IACD,MAAM,EAAEC,OAAO,GAAE,GAAGN,MAAM,CAACO,KAAK;IAChC,MAAM,EAAEC,GAAG,GAAEC,MAAM,GAAE,GAAGrB,sEAAS,EAAE;IAEnCD,gDAAS,CAAC,IAAM;QACd,IAAIsB,MAAM,IAAIN,YAAY,IAAI,CAACD,eAAe,EAAE;YAC9C,MAAMQ,MAAM,GAAGT,SAAS,CAACA,SAAS,CAACU,MAAM,GAAG,CAAC,CAAC,EAAEC,EAAE;YAElDb,QAAQ,CAACP,uFAAuB,CAAC;gBAAEkB,MAAM,EAAEA,MAAM;gBAAEJ,OAAO,EAAEA,OAAO;aAAE,CAAC,CAAC,CAAC;SACzE;KACF,EAAE;QAACG,MAAM;QAAEN,YAAY;QAAED,eAAe;QAAED,SAAS;QAAEK,OAAO;KAAC,CAAC,CAAC;IAEhE,qBACE,mDAACZ,mEAAM;kBACL,sEAACmB,KAAG;YAACC,SAAS,EAAC,gBAAgB;;8BAC7B,wDAACjB,sDAAM;;wBAAC,GAAC;wBAACS,OAAO;wBAAC,6BAAO;;kBAAS;gBACjCL,SAAS,EAAEc,GAAG,CAAC,CAACC,IAAI,iBACnB,mDAACrB,qEAAQ;wBAAiB,GAAGqB,IAAI;uBAAlBA,IAAI,EAAEJ,EAAE,CAAc;gBACtC,CAAC;8BACF,mDAACC,KAAG;oBACFC,SAAS,EAAC,MAAM;oBAChBN,GAAG,EAAEL,YAAY,IAAI,CAACD,eAAe,GAAGM,GAAG,GAAGS,SAAS;kBACvD;;UACE;MACC,CACT;CACH;AAEM,MAAMC,kBAAkB,GAC7BtB,4GAA0B,CAAC,CAACuB,KAAK,GAAK,OAAOC,OAAO,GAAK;QACvD,MAAMC,MAAM,GAAGD,OAAO,CAACE,GAAG,GAAGF,OAAO,CAACE,GAAG,CAACC,OAAO,CAACF,MAAM,GAAG,EAAE;QAC5DrC,6EAAoC,GAAG,EAAE,CAAC;QAC1C,IAAIoC,OAAO,CAACE,GAAG,IAAID,MAAM,EAAE;YACzBrC,6EAAoC,GAAGqC,MAAM,CAAC;SAC/C;QAEDF,KAAK,CAACpB,QAAQ,CAACN,sFAAuB,EAAE,CAAC,CAAC;QAE1C0B,KAAK,CAACpB,QAAQ,CAACR,2CAAG,CAAC,CAAC;QACpB,MAAM4B,KAAK,CAACQ,QAAQ,CAACC,SAAS,EAAE,CAAC;QAEjC,OAAO;YACLC,KAAK,EAAE,EAAE;SACV,CAAC;KACH;AAAA,CAAC,CAAC;AAEL,iEAAe/B,MAAM,EAAC;;;;;;;;;;ACnEtB;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA","sources":["webpack://react-social-app/./pages/search/[keyword].tsx","webpack://react-social-app/external commonjs \"@ant-design/icons\"","webpack://react-social-app/external commonjs \"axios\"","webpack://react-social-app/external commonjs \"next-redux-wrapper\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/head-manager-context.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/i18n/normalize-locale-path.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/is-plain-object.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/mitt.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/page-path/denormalize-page-path.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/router-context.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/router/utils/format-url.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/router/utils/get-asset-path-from-route.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/router/utils/get-middleware-regex.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/router/utils/is-dynamic.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/router/utils/parse-relative-url.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/router/utils/querystring.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/router/utils/resolve-rewrites.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/router/utils/route-matcher.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/router/utils/route-regex.js\"","webpack://react-social-app/external commonjs \"next/dist/shared/lib/utils.js\"","webpack://react-social-app/external commonjs \"next/router\"","webpack://react-social-app/external commonjs \"react\"","webpack://react-social-app/external commonjs \"react-redux\"","webpack://react-social-app/external commonjs \"react-slick\"","webpack://react-social-app/external commonjs \"react/jsx-runtime\"","webpack://react-social-app/external commonjs \"redux\"","webpack://react-social-app/external commonjs \"redux-devtools-extension\"","webpack://react-social-app/external commonjs \"redux-saga\"","webpack://react-social-app/external commonjs \"redux-saga/effects\"","webpack://react-social-app/external commonjs \"tailwind-styled-components\"","webpack://react-social-app/external module \"immer\"","webpack://react-social-app/external module \"react-hook-form\"","webpack://react-social-app/external module \"react-intersection-observer\""],"sourcesContent":["import axios from \"axios\";\r\nimport { GetServerSideProps } from \"next\";\r\nimport { useRouter } from \"next/router\";\r\nimport React, { useEffect } from \"react\";\r\nimport { useInView } from \"react-intersection-observer\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { END } from \"redux-saga\";\r\nimport { searchLoadRequestAction } from \"../../action/postActions\";\r\nimport { myInfoLoadRequestAction } from \"../../action/userAction\";\r\nimport Layout from \"../../components/Layout\";\r\nimport PostCard from \"../../components/PostCard\";\r\nimport { RootState } from \"../../reducers\";\r\nimport wrapper from \"../../store/configureStore\";\r\nimport { Header } from \"../hashtag/[hashtag]\";\r\n\r\nfunction Search() {\r\n  const dispatch = useDispatch();\r\n  const router = useRouter();\r\n  const { mainPosts, postLoadLoading, hasMorePosts } = useSelector(\r\n    (state: RootState) => state.postReducer\r\n  );\r\n  const { keyword } = router.query;\r\n  const { ref, inView } = useInView();\r\n\r\n  useEffect(() => {\r\n    if (inView && hasMorePosts && !postLoadLoading) {\r\n      const lastId = mainPosts[mainPosts.length - 1]?.id;\r\n\r\n      dispatch(searchLoadRequestAction({ lastId: lastId, keyword: keyword }));\r\n    }\r\n  }, [inView, hasMorePosts, postLoadLoading, mainPosts, keyword]);\r\n\r\n  return (\r\n    <Layout>\r\n      <div className=\"relative mt-10\">\r\n        <Header>'{keyword}' 검색 결과</Header>\r\n        {mainPosts?.map((post) => (\r\n          <PostCard key={post?.id} {...post} />\r\n        ))}\r\n        <div\r\n          className=\"h-10\"\r\n          ref={hasMorePosts && !postLoadLoading ? ref : undefined}\r\n        />\r\n      </div>\r\n    </Layout>\r\n  );\r\n}\r\n\r\nexport const getServerSideProps: GetServerSideProps =\r\n  wrapper.getServerSideProps((store) => async (context) => {\r\n    const cookie = context.req ? context.req.headers.cookie : \"\";\r\n    axios.defaults.headers.common.Cookie = \"\";\r\n    if (context.req && cookie) {\r\n      axios.defaults.headers.common.Cookie = cookie;\r\n    }\r\n\r\n    store.dispatch(myInfoLoadRequestAction());\r\n\r\n    store.dispatch(END);\r\n    await store.sagaTask.toPromise();\r\n\r\n    return {\r\n      props: {},\r\n    };\r\n  });\r\n\r\nexport default Search;\r\n","module.exports = require(\"@ant-design/icons\");","module.exports = require(\"axios\");","module.exports = require(\"next-redux-wrapper\");","module.exports = require(\"next/dist/shared/lib/head-manager-context.js\");","module.exports = require(\"next/dist/shared/lib/i18n/normalize-locale-path.js\");","module.exports = require(\"next/dist/shared/lib/is-plain-object.js\");","module.exports = require(\"next/dist/shared/lib/mitt.js\");","module.exports = require(\"next/dist/shared/lib/page-path/denormalize-page-path.js\");","module.exports = require(\"next/dist/shared/lib/router-context.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/format-url.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/get-asset-path-from-route.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/get-middleware-regex.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/is-dynamic.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/parse-relative-url.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/querystring.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/resolve-rewrites.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/route-matcher.js\");","module.exports = require(\"next/dist/shared/lib/router/utils/route-regex.js\");","module.exports = require(\"next/dist/shared/lib/utils.js\");","module.exports = require(\"next/router\");","module.exports = require(\"react\");","module.exports = require(\"react-redux\");","module.exports = require(\"react-slick\");","module.exports = require(\"react/jsx-runtime\");","module.exports = require(\"redux\");","module.exports = require(\"redux-devtools-extension\");","module.exports = require(\"redux-saga\");","module.exports = require(\"redux-saga/effects\");","module.exports = require(\"tailwind-styled-components\");","module.exports = import(\"immer\");;","module.exports = import(\"react-hook-form\");;","module.exports = import(\"react-intersection-observer\");;"],"names":["axios","useRouter","React","useEffect","useInView","useSelector","useDispatch","END","searchLoadRequestAction","myInfoLoadRequestAction","Layout","PostCard","wrapper","Header","Search","dispatch","router","mainPosts","postLoadLoading","hasMorePosts","state","postReducer","keyword","query","ref","inView","lastId","length","id","div","className","map","post","undefined","getServerSideProps","store","context","cookie","req","headers","defaults","common","Cookie","sagaTask","toPromise","props"],"sourceRoot":""}